name: Daily News Summary

# ðŸ”´ TO DISABLE: Change 'true' to 'false' below
# ðŸŸ¢ TO ENABLE: Change 'false' to 'true' below
env:
  DAILY_NEWS_ENABLED: 'true'

on:
  schedule:
    # Run at 9:00 AM ET (13:00 UTC during EST, 14:00 UTC during EDT)
    # Using 14:00 UTC to cover EDT (most of the year)
    - cron: '0 14 * * *'
  workflow_dispatch: # Allow manual triggering

jobs:
  post-news-summary:
    runs-on: ubuntu-latest
    steps:
      - name: Check if enabled
        id: check
        run: |
          if [ "${{ env.DAILY_NEWS_ENABLED }}" = "true" ]; then
            echo "enabled=true" >> $GITHUB_OUTPUT
            echo "âœ… Daily news summary is ENABLED"
          else
            echo "enabled=false" >> $GITHUB_OUTPUT
            echo "ðŸ”´ Daily news summary is DISABLED - skipping"
          fi
      
      - name: Trigger Daily News Summary
        if: steps.check.outputs.enabled == 'true'
        run: |
          curl -X POST \
            -H "Content-Type: application/json" \
            ${{ secrets.AGENT_WEBHOOK_URL }}
